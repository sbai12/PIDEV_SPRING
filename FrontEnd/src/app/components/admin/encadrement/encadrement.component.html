

<!-- Page Content -->
<div class="container mt-5">
    <h2 class="text-center">Encadrement Management</h2>

    <!-- Search Bar -->
    <div class="d-flex justify-content-between mb-3">
      <input type="text" class="form-control w-50" placeholder="Search encadrements..." [(ngModel)]="searchTerm" />
      <button class="btn btn-success" (click)="openModal(null)">Add Encadrement</button>
    </div>

    <!-- Encadrement Table -->
    <div class="table-responsive">
      <table class="table table-striped table-bordered text-center">
        <thead class="table-success">
          <tr>
            <th>ID</th>
            <th>Status</th>
            <th>Task</th>
            <th>Date</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let encadrement of filteredEncadrements()">
            <td>{{ encadrement.id }}</td>
            <td>{{ encadrement.status }}</td>
            <td>{{ encadrement.tache }}</td>
            <td>{{ encadrement.encadrement_date }}</td>
            <td>
              <button class="btn btn-primary btn-sm me-2" (click)="editEncadrement(encadrement)">Edit</button>
              <button class="btn btn-danger btn-sm" (click)="deleteEncadrement(encadrement.id, encadrement.status)">
                Delete
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
</div>

<!-- Modal for Adding/Editing Encadrement -->
<div *ngIf="showModal" class="modal fade show d-block" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">{{ isEditMode ? 'Edit Encadrement' : 'Add Encadrement' }}</h5>
        <button type="button" class="btn-close" (click)="closeModal()"></button>
      </div>
      <div class="modal-body">
        <label>Status:</label>
        <input type="text" class="form-control" [(ngModel)]="selectedEncadrement.status" />

        <label>Task:</label>
        <input type="text" class="form-control" [(ngModel)]="selectedEncadrement.tache" />

        <label>Date:</label>
        <input type="date" class="form-control" [(ngModel)]="selectedEncadrement.encadrement_date" />
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" (click)="closeModal()">Cancel</button>
        <button class="btn btn-success" (click)="saveEncadrement()">
          {{ isEditMode ? 'Update' : 'Save' }}
        </button>
      </div>
    </div>
  </div>
</div>
