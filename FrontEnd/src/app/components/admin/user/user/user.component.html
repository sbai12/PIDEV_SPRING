

<div class="container mt-5">
    <h2 class="text-center">User Management</h2>
  
    <!-- Search Bar & Role Filter -->
    <div class="d-flex justify-content-between mb-3">
      <input
        type="text"
        class="form-control w-50"
        placeholder="Search users..."
        [(ngModel)]="searchTerm"
      />
  
      <!-- Role Filter Dropdown -->
      <select class="form-select w-25" [(ngModel)]="selectedRole" (change)="filterUsersByRole()">
        <option value="">All Roles</option>
        <option *ngFor="let role of roles" [value]="role">{{ role }}</option>
      </select>
  
      <button class="btn btn-success" (click)="openModal()">Add User</button>
    </div>
  
    <!-- Users Table -->
    <div class="table-responsive">
      <table class="table table-striped table-bordered">
        <thead class="table-success">
          <tr>
            <th>ID</th>
            <th>First Name</th>
            <th>Last Name</th>
            <th>Email</th>
            <th>Role</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let user of filteredUsers()">
            <td>{{ user.id }}</td>
            <td>{{ user.firstname }}</td>
            <td>{{ user.lastname }}</td>
            <td>{{ user.email }}</td>
            <td>{{ user.role }}</td>
            <td class="action-buttons">
              <button class="btn btn-primary btn-sm" (click)="openModal(user)">Edit</button>
              <button
                class="btn btn-danger btn-sm"
                (click)="deleteUser(user.id, user.firstname + ' ' + user.lastname)"
                [disabled]="!user.id"
              >
                Delete
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  
  
 <!-- Modal for Adding/Editing User -->
<div *ngIf="showModal" class="modal fade show d-block" tabindex="-1">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">{{ isEditMode ? 'Edit User' : 'Add User' }}</h5>
          <button type="button" class="btn-close" (click)="closeModal()"></button>
        </div>
        <div class="modal-body">
          <label>First Name:</label>
          <input type="text" class="form-control" [(ngModel)]="selectedUser.firstname" required/>
  
          <label>Last Name:</label>
          <input type="text" class="form-control" [(ngModel)]="selectedUser.lastname" required/>
  
          <label>Email:</label>
          <input type="email" class="form-control" [(ngModel)]="selectedUser.email" required/>
  
          <label>Password:</label>
          <input type="password" class="form-control" [(ngModel)]="selectedUser.password" required/>
  
          <label>Speciality:</label>
          <input type="text" class="form-control" [(ngModel)]="selectedUser.specialite"/>
  
          <label>Competence:</label>
          <input type="text" class="form-control" [(ngModel)]="selectedUser.competence"/>
  
          <label>Niveau (Level):</label>
          <input type="text" class="form-control" [(ngModel)]="selectedUser.niveau"/>
  
          <label>Phone:</label>
          <input type="text" class="form-control" [(ngModel)]="selectedUser.phone"/>
  
          <label>Status:</label>
          <input type="text" class="form-control" [(ngModel)]="selectedUser.status"/>
  
          <label>Role:</label>
          <select class="form-select" [(ngModel)]="selectedUser.role">
            <option value="Admin">Admin</option>
            <option value="Supervisor">Supervisor</option>
            <option value="Candidate">Candidate</option>
            <option value="Teacher">Teacher</option>
            <option value="Representant">Representant</option>
          </select>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" (click)="closeModal()">Cancel</button>
          <button class="btn btn-success" (click)="saveUser()">
            {{ isEditMode ? 'Update' : 'Save' }}
          </button>
        </div>
      </div>
    </div>
  </div>
  